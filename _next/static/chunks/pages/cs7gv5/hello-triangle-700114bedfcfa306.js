(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{5504:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cs7gv5/hello-triangle",function(){return n(3450)}])},3450:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ie}});var r=n(5893),i=n(9685),o=n(7160),a=n(5975),s=n(7294),c=n(5988),u=n.n(c),f=function(e){var t=e.onDraw,n=e.onError,i=e.onInitialize,o=e.onResize,a=(0,s.useRef)(),c=(0,s.useRef)(),f=(0,s.useRef)(),l=(0,s.useRef)();return(0,s.useEffect)((function(){var e,t=new ResizeObserver((function(){c.current.width=a.current.offsetWidth,c.current.height=a.current.offsetHeight,o(c.current.width,c.current.height)}));return t.observe(a.current),null===(e=f.current)||void 0===e||e.viewport(0,0,c.current.width,c.current.height),function(){t.disconnect()}}),[c,a,o]),(0,s.useEffect)((function(){if(c.current){var e=0,r=performance.now(),o=Array.from({length:16384},(function(){return 0})),a=c.current.getContext("webgl2",{antialias:!0,depth:!0,desynchronized:!0,stencil:!0});if(f.current=a,a){console.debug("DEBUG:","WebGL context created"),i(a);var s=setInterval((function(){a.viewport(0,0,c.current.width,c.current.height),a.clearColor(.1,.1,.1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),t(a),a.flush(),o[++e]=performance.now()-r,r=performance.now()})),u=setInterval((function(){var t=o.reduce((function(e,t){return e+t}),0)/o.length,n=o.reduce((function(e,n){return e+Math.pow(n-t,2)}),0)/o.length;l.current.innerHTML="FPS=".concat(e,", frame_avg=").concat(t.toFixed(2),", frame_var=").concat(n.toFixed(2)),l.current.style.color=n>1?"red":"white",e=0}),1e3);return function(){clearInterval(s),clearInterval(u),console.debug("DEBUG:","Unmounting WebGLCanvas")}}n(new Error("Failed to get WebGL context"))}}),[c,t,n,i]),(0,r.jsxs)("div",{ref:a,className:"jsx-cabf55a6a4088475 canvas-container",children:[(0,r.jsx)("canvas",{ref:c,className:"jsx-cabf55a6a4088475 canvas",children:(0,r.jsx)("p",{className:"jsx-cabf55a6a4088475",children:"The canvas element is not supported by your browser"})}),(0,r.jsx)("span",{ref:l,className:"jsx-cabf55a6a4088475 fps"}),(0,r.jsx)(u(),{id:"cabf55a6a4088475",children:".canvas.jsx-cabf55a6a4088475{max-height:100%;\nposition:absolute}\n.canvas-container.jsx-cabf55a6a4088475{content:' ';\nheight:100%;\nmax-height:100%;\nposition:absolute;\nwidth:100%}\n.fps.jsx-cabf55a6a4088475{color:white;\nfont-family:monospace;\nright:0;\nposition:absolute;\ntop:0}"})]})};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e).value}function v(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");var r=t.get(e);if(!r.writable)throw new TypeError("attempted to set read only private field");return r.value=n,n}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function y(e,t,n){return(y=d()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i}).apply(null,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function E(e){var t="function"===typeof Map?new Map:void 0;return(E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return y(e,arguments,w(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),g(r,e)})(e)}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}var P=function(){function e(t,n){var r=t.name,i=t.source,o=t.type;l(this,e),T.set(this,{writable:!0,value:void 0}),x.set(this,{writable:!0,value:void 0}),_.set(this,{writable:!0,value:void 0});var a=n.createShader(o);n.shaderSource(a,i),n.compileShader(a),v(this,T,n),v(this,x,r),v(this,_,a)}return b(e,[{key:"name",get:function(){return h(this,x)}},{key:"shader",get:function(){return h(this,_)}},{key:"infoLog",get:function(){return h(this,T).getShaderInfoLog(h(this,_))}}]),e}(),T=new WeakMap,x=new WeakMap,_=new WeakMap,M=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(n,e);var t=R(n);function n(e,r){l(this,n);var i="Shader compilation error:".concat(e,"\n")+"".concat(r.map((function(e,t){var n=e.name,r=e.infoLog;return"Shader ".concat(null!==n&&void 0!==n?n:"#".concat(t),": ").concat(r)})).join("\n\t"));return t.call(this,i)}return n}(E(Error)),j=function(){function e(t,n){l(this,e),A.set(this,{writable:!0,value:void 0}),F.set(this,{writable:!0,value:void 0});var r=n.createProgram(),i=t.map((function(e){return new P(e,n)}));if(i.forEach((function(e){return n.attachShader(r,e.shader)})),n.linkProgram(r),!1===n.getProgramParameter(r,n.LINK_STATUS))throw new M(n.getProgramInfoLog(r),i.map((function(e){return{name:e.name,infoLog:e.infoLog}})));v(this,A,n),v(this,F,r)}return b(e,[{key:"program",get:function(){return h(this,F)}},{key:"infoLog",get:function(){return h(this,A).getProgramInfoLog(h(this,F))}},{key:"setMat4",value:function(e,t){h(this,A).uniformMatrix4fv(h(this,A).getUniformLocation(h(this,F),e),!1,t)}},{key:"use",value:function(){h(this,A).useProgram(h(this,F))}}]),e}(),A=new WeakMap,F=new WeakMap;function L(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e).value}function S(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");var r=t.get(e);if(!r.writable)throw new TypeError("attempted to set read only private field");return r.value=n,n}function N(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=i.c$,O=o.al(0,1,0),C=o.al(0,0,0),U=10,B=new WeakSet,D=new WeakSet,G=new WeakSet,z=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),H.set(this,{writable:!0,value:void 0}),V.set(this,{writable:!0,value:void 0}),K.set(this,{writable:!0,value:void 0}),X.set(this,{writable:!0,value:o.Ue()}),Y.set(this,{writable:!0,value:o.Ue()}),$.set(this,{writable:!0,value:o.Ue()}),q.set(this,{writable:!0,value:a.Ue()}),B.add(this),D.add(this),G.add(this),this.keyboardInterval=0,this.keyboardLastTime=0,this.keyboardNegative=o.al(0,0,0),this.keyboardPositive=o.al(0,0,0),S(this,H,o.d9(t)),S(this,V,n),S(this,K,r),N(this,G,Z).call(this)}var t,n,r;return t=e,(n=[{key:"view",get:function(){return L(this,q)}},{key:"addKeyboardListener",value:function(){var e=this;document.addEventListener("keyup",(function(t){N(e,D,Q).call(e,t)})),document.addEventListener("keydown",(function(t){N(e,B,J).call(e,t)}))}},{key:"rotate",value:function(e,t){S(this,V,L(this,V)+e),S(this,K,L(this,K)+t),N(this,G,Z).call(this)}},{key:"setPosition",value:function(e,t,n){S(this,H,o.al(e,t,n)),N(this,G,Z).call(this)}},{key:"setRotation",value:function(e,t){S(this,V,e),S(this,K,t),N(this,G,Z).call(this)}},{key:"translate",value:function(e){o.IH(L(this,H),L(this,H),e),N(this,G,Z).call(this)}}])&&I(t.prototype,n),r&&I(t,r),e}(),H=new WeakMap,V=new WeakMap,K=new WeakMap,X=new WeakMap,Y=new WeakMap,$=new WeakMap,q=new WeakMap;function J(e){if("w"!==e.key&&"W"!==e.key||(this.keyboardNegative[2]=U),"a"!==e.key&&"A"!==e.key||(this.keyboardNegative[0]=U),"f"!==e.key&&"F"!==e.key||(this.keyboardNegative[1]=U),"s"!==e.key&&"S"!==e.key||(this.keyboardPositive[2]=U),"d"!==e.key&&"D"!==e.key||(this.keyboardPositive[0]=U),"r"!==e.key&&"R"!==e.key||(this.keyboardPositive[1]=U),o.TE(this.keyboardNegative,C)>0||o.TE(this.keyboardPositive,C)>0){var t=this;this.keyboardLastTime=performance.now(),this.keyboardInterval=setInterval((function(){var e=(performance.now()-t.keyboardLastTime)/1e3,n=o.al((-t.keyboardNegative[0]+t.keyboardPositive[0])*e,(-t.keyboardNegative[1]+t.keyboardPositive[1])*e,(-t.keyboardNegative[2]+t.keyboardPositive[2])*e);t.translate(n),t.keyboardLastTime=performance.now()}))}}function Q(e){"w"!==e.key&&"W"!==e.key||(this.keyboardNegative[2]=0),"a"!==e.key&&"A"!==e.key||(this.keyboardNegative[0]=0),"f"!==e.key&&"F"!==e.key||(this.keyboardNegative[1]=0),"s"!==e.key&&"S"!==e.key||(this.keyboardPositive[2]=0),"d"!==e.key&&"D"!==e.key||(this.keyboardPositive[0]=0),"r"!==e.key&&"R"!==e.key||(this.keyboardPositive[1]=0),0!==o.TE(this.keyboardNegative,C)&&0!==o.TE(this.keyboardPositive,C)||clearInterval(this.keyboardInterval)}function Z(){L(this,X)[0]=Math.cos(W(L(this,V)))*Math.cos(W(L(this,K))),L(this,X)[1]=Math.sin(W(L(this,V))),L(this,X)[2]=Math.cos(W(L(this,V)))*Math.sin(W(L(this,K))),o.Fv(L(this,X),L(this,X)),o.kC(L(this,Y),O,L(this,X)),o.Fv(L(this,Y),L(this,Y)),o.kC(L(this,$),L(this,X),L(this,Y)),o.Fv(L(this,$),L(this,$)),a.zB(L(this,q),L(this,H),o.IH(o.Ue(),L(this,H),L(this,X)),L(this,$))}var ee=n(6441),te=n(1666),ne=i.c$,re=new Float32Array([[-1,-1,-1,1,0,0,1],[1,-1,1,1,0,0,1],[-1,-1,1,1,1,0,1],[-1,-1,-1,1,0,0,1],[1,-1,-1,1,1,0,1],[1,-1,1,1,0,0,1],[-1,-1,-1,1,0,0,1],[1,1,-1,0,0,1,1],[1,-1,-1,1,1,0,1],[-1,-1,-1,1,0,0,1],[1,1,-1,0,0,1,1],[-1,1,-1,1,1,0,1],[1,-1,1,1,0,0,1],[1,-1,-1,1,1,0,1],[1,1,-1,0,0,1,1]].flat()),ie=function(){var e=(0,s.useRef)(1),t=(0,s.useRef)(new z(o.al(0,0,5),0,270)),n=(0,s.useRef)(),i=a.Ue(),c=a.yR(a.Ue());return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(f,{onDraw:function(r){var s=t.current,u=n.current;a.G3(i,ne(45),e.current,.1,100),a.yR(c),a.Iu(c,c,o.al(0,0,0)),u.use(),u.setMat4("projection",i),u.setMat4("model",c),u.setMat4("view",s.view);for(var f=0;f<5;f++)r.drawArrays(r.TRIANGLES,3*f,3)},onError:function(e){console.error(e)},onInitialize:function(e){n.current=new j([{name:"vertex",source:te,type:e.VERTEX_SHADER},{name:"fragment",source:ee,type:e.FRAGMENT_SHADER}],e);var r=e.createVertexArray();e.bindVertexArray(r);var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,re,e.STATIC_DRAW);var o=Float32Array.BYTES_PER_ELEMENT;e.vertexAttribPointer(0,3,e.FLOAT,!1,7*o,0),e.enableVertexAttribArray(0),e.vertexAttribPointer(1,4,e.FLOAT,!1,7*o,3*o),e.enableVertexAttribArray(1),t.current.addKeyboardListener()},onResize:function(t,n){return e.current=t/n}})})}},6441:function(e){"use strict";e.exports="#version 300 es\n\nprecision highp float;\n\nin vec4 fColor;\n\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = fColor;\n}"},1666:function(e){"use strict";e.exports="#version 300 es\n\nprecision highp float;\n\nlayout(location = 0) in vec3 vPosition;\nlayout(location = 1) in vec4 vColor;\n\nout vec4 fColor;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nvoid main() {\n    gl_Position = projection * view * model * vec4(vPosition, 1.0);\n    fColor = vColor;\n}"}},function(e){e.O(0,[279,774,888,179],(function(){return t=5504,e(e.s=t);var t}));var t=e.O();_N_E=t}]);